@page "/NumberMemory"

@using Frontend.Games.NumberMemory

<PageTitle>NumberMemory</PageTitle>

<h2>High Score: @Manager.HighScore</h2>
<h2>Current Score: @Manager.Score</h2>

<div class="game-container">
    @if (Manager.GameOver)
    {
        <h1>Game Over</h1>
        <p>Your Score: @Manager.Score</p>
        <button class="button" @onclick="Manager.StartNewGame">Start New Game</button>
    }
    else
    {
        <h1>Number Memory Game</h1>
        @if (Manager.ShowNumber)
        {
            <p class="number-display">@Manager.CurrentNumber</p>
        }
        else
        {
            <input class="input-box" @ref="InputElement" value="@Manager.UserInput"
                @oninput="e => Manager.UserInput = e.Value?.ToString() ?? string.Empty" @onkeydown="HandleKeyPress"
                placeholder="Enter the number" />
            <button class="button" @onclick="Manager.CheckUserInput">Submit</button>
        }
    }
</div>

@code {
    protected ElementReference InputElement;

    private async Task HandleKeyPress(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            await Manager.CheckUserInput();
        }
    }
}
